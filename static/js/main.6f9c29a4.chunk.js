(this["webpackJsonpclient-g-tech"]=this["webpackJsonpclient-g-tech"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);n(84);var r=n(0),a=n(10),c=n.n(a),s=n(69),i=n(70),o=n(77),u=n(76),l=(n(89),n(11)),j=n(39),d=n(78),p=n(3),b=["user","component","render"],m=function(e){var t=e.user,n=e.component,r=e.render,a=Object(d.a)(e,b);return t&&r?(console.log("there is a user"),Object(p.jsx)(l.b,Object(j.a)(Object(j.a)({},a),{},{render:r}))):(console.log("no user"),Object(p.jsx)(l.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return t?Object(p.jsx)(n,Object(j.a)({},e)):Object(p.jsx)(l.a,{to:"/"})}})))},h=n(18),O=n(155),f=n(75),x=n(163),g=n(157),v=n(152),y=Object(v.a)({menu:{marginTop:"3em"}}),w=function(e){var t=Object(r.useState)(null),n=Object(h.a)(t,2),a=n[0],c=n[1],s=Boolean(a),i=y(),o=function(){c(null)};return Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)(O.a,{color:"inherit",onClick:function(e){c(e.currentTarget)},children:"admin"}),Object(p.jsx)(f.a,{className:i.menu,anchorEl:a,keepMounted:!0,open:s,onClose:o,TransitionComponent:g.a,children:Object(p.jsx)(x.a,{onClick:o,children:e.children})})]})},S=n(159),k=n(160),N=n(14),C=n(158),A=Object(v.a)({link:{margin:"1rem"},navBar:{marginBottom:"2rem"}}),U=function(e){var t=e.user,n=e.isAdmin,a=A(),c=Object(p.jsx)(r.Fragment,{children:Object(p.jsxs)(w,{children:[Object(p.jsx)(C.a,{className:a.link,component:N.b,to:"/create-product",children:"Create"}),Object(p.jsx)(C.a,{className:a.link,component:N.b,to:"/update-product",children:"Update"}),Object(p.jsx)(C.a,{className:a.link,component:N.b,to:"/delete-product",children:"Delete"})]})}),s=Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)(C.a,{className:a.link,component:N.b,to:"/change-password",color:"inherit",children:"Change Password"}),Object(p.jsx)(C.a,{className:a.link,component:N.b,to:"/sign-out",color:"inherit",children:"Sign Out"})]}),i=Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)(C.a,{className:a.link,component:N.b,to:"/sign-up",color:"inherit",children:"Sign Up"}),Object(p.jsx)(C.a,{className:a.link,component:N.b,to:"/sign-in",color:"inherit",children:"Sign In"})]});return Object(p.jsx)(S.a,{position:"static",className:a.navBar,children:Object(p.jsxs)(k.a,{style:{justifyContent:"flex-end"},children:[t?s:i,n?c:""]})})},W=n(17),B=n.n(W),q=n(23),I="http://localhost:8080",P=n(32),T=n.n(P),D=function(e,t,n){return T()({method:"POST",url:I+"/sign-up",data:{credentials:{email:e,password:t,password_confirmation:n}}})},E=function(e,t){return T()({method:"POST",url:I+"/sign-in",data:{credentials:{email:e,password:t}}})},F=function(e,t,n){return console.log(e),T()({method:"PATCH",url:I+"/change-password",headers:{Authorization:"Bearer ".concat(e.token)},data:{passwords:{old:t,new:n}}})},z=function(e){return T()({method:"DELETE",url:I+"/sign-out",headers:{Authorization:"Bearer ".concat(e.token)}})},J=n(116),H=n(162),L=n(117),M=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),V=Object(l.f)((function(e){var t=e.setUser,n=e.history,a=Object(r.useState)(""),c=Object(h.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),u=Object(h.a)(o,2),l=u[0],j=u[1],d=Object(r.useState)(""),b=Object(h.a)(d,2),m=b[0],f=b[1],x=M();return Object(p.jsxs)(J.a,{className:x.paper,children:[Object(p.jsx)(L.a,{variant:"h4",align:"center",children:"Sign Up"}),Object(p.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),function(){var e=Object(q.a)(B.a.mark((function e(){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(s,l,m);case 3:r=e.sent,t(r.data.user),n.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error message: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)(H.a,{className:x.input,value:s,onChange:function(e){return i(e.target.value)},label:"Email",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:x.input,value:l,onChange:function(e){return j(e.target.value)},label:"Password",type:"password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:x.input,value:m,onChange:function(e){return f(e.target.value)},label:"Password Confirm",type:"password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})})),_=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),G=Object(l.f)((function(e){e.user;var t=e.setUser,n=e.setIsAdmin,a=e.history,c=Object(r.useState)(""),s=Object(h.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),l=Object(h.a)(u,2),j=l[0],d=l[1],b=_();return Object(p.jsxs)(J.a,{className:b.paper,children:[Object(p.jsx)(L.a,{variant:"h4",align:"center",children:"Sign In"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e=Object(q.a)(B.a.mark((function e(){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(i,j);case 3:r=e.sent,t(r.data.user),"admin"===r.data.user.role&&n(!0),a.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)(H.a,{className:b.input,value:i,onChange:function(e){return o(e.target.value)},label:"Email",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:b.input,value:j,onChange:function(e){return d(e.target.value)},label:"Password",type:"password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})})),K=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),Q=Object(l.f)((function(e){var t=e.user,n=e.history,a=Object(r.useState)(""),c=Object(h.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),u=Object(h.a)(o,2),l=u[0],j=u[1],d=K();return Object(p.jsxs)(J.a,{className:d.paper,children:[Object(p.jsx)(L.a,{variant:"h4",align:"center",children:"Change Password"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e=Object(q.a)(B.a.mark((function e(){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t,s,l);case 3:r=e.sent,console.log("changepassword response:",r),n.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)(H.a,{className:d.input,value:s,onChange:function(e){return i(e.target.value)},label:"old password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:d.input,value:l,onChange:function(e){return j(e.target.value)},label:"new password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})})),R=Object(l.f)((function(e){var t=e.user,n=e.setIsAdmin,a=e.clearUser,c=e.history;return Object(r.useEffect)((function(){!function(){var e=Object(q.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{z(t),a(),n(!1),c.push("/")}catch(r){console.log("error")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()})),null})),X=function(e,t,n){return T()({method:"POST",url:I+"/products",headers:{Authorization:"Bearer ".concat(e.token)},data:{product:{productDetails:{title:t,description:n}}}})},Y=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),Z=function(e){var t=e.user,n=Object(r.useState)(""),a=Object(h.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(h.a)(i,2),u=o[0],l=o[1],j=Y();return Object(p.jsxs)(J.a,{className:j.paper,children:[Object(p.jsx)(L.a,{variant:"h4",align:"center",children:"Add a product"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e=Object(q.a)(B.a.mark((function e(){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(t,c,u);case 3:n=e.sent,console.log("successfully created",n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)(H.a,{className:j.input,value:c,onChange:function(e){return s(e.target.value)},label:"Title",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:j.input,value:u,onChange:function(e){return l(e.target.value)},label:"Description",color:"primary",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,required:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})},$=n(161),ee=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).setUser=function(e){return r.setState({user:e})},r.setIsAdmin=function(e){r.setState({isAdmin:e}),console.log("is admin set to: ",r.state.isAdmin)},r.clearUser=function(){return r.setState({user:null})},r.state={user:null,isAdmin:!1},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.user,a=t.isAdmin;return Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)(U,{user:n,isAdmin:a}),Object(p.jsxs)($.a,{maxWidth:"sm",children:[Object(p.jsx)(l.b,{path:"/sign-up",render:function(){return Object(p.jsx)(V,{user:n,setUser:e.setUser})}}),Object(p.jsx)(l.b,{path:"/sign-in",render:function(){return Object(p.jsx)(G,{user:n,setUser:e.setUser,setIsAdmin:e.setIsAdmin})}}),Object(p.jsx)(m,{user:n,path:"/change-password",render:function(){return Object(p.jsx)(Q,{user:n})}}),Object(p.jsx)(m,{user:n,path:"/sign-out",render:function(){return Object(p.jsx)(R,{user:n,setIsAdmin:e.setIsAdmin,clearUser:e.clearUser})}}),Object(p.jsx)(m,{user:n,path:"/create-product",render:function(){return Object(p.jsx)(Z,{user:n})}})]})]})}}]),n}(r.Component),te=Object(p.jsx)(N.a,{children:Object(p.jsx)(ee,{})});c.a.render(te,document.querySelector("#root"))},84:function(e,t,n){},89:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.6f9c29a4.chunk.js.map