(this["webpackJsonpclient-g-tech"]=this["webpackJsonpclient-g-tech"]||[]).push([[0],{116:function(e,t,r){"use strict";r.r(t);r(85);var n=r(0),a=r(10),c=r.n(a),s=r(69),i=r(70),o=r(77),u=r(76),l=(r(90),r(12)),j=r(40),d=r(78),p=r(2),b=["user","component","render"],m=function(e){var t=e.user,r=e.component,n=e.render,a=Object(d.a)(e,b);return t&&n?(console.log("there is a user"),Object(p.jsx)(l.b,Object(j.a)(Object(j.a)({},a),{},{render:n}))):(console.log("no user"),Object(p.jsx)(l.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return t?Object(p.jsx)(r,Object(j.a)({},e)):Object(p.jsx)(l.a,{to:"/"})}})))},h=r(11),O=r(157),f=r(75),g=r(167),x=r(159),v=r(154),y=Object(v.a)({menu:{marginTop:"3em"}}),S=function(e){var t=Object(n.useState)(null),r=Object(h.a)(t,2),a=r[0],c=r[1],s=Boolean(a),i=y(),o=function(){c(null)};return Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(O.a,{color:"inherit",onClick:function(e){c(e.currentTarget)},children:"admin"}),Object(p.jsx)(f.a,{className:i.menu,anchorEl:a,keepMounted:!0,open:s,onClose:o,TransitionComponent:x.a,children:Object(p.jsx)(g.a,{onClick:o,children:e.children})})]})},w=r(161),C=r(162),N=r(16),k=r(160),W=Object(v.a)({link:{margin:"1rem"},navBar:{marginBottom:"2rem"}}),U=function(e){var t=e.user,r=e.isAdmin,a=W(),c=Object(p.jsx)(n.Fragment,{children:Object(p.jsxs)(S,{children:[Object(p.jsx)(k.a,{className:a.link,component:N.b,to:"/create-product",children:"Create"}),Object(p.jsx)(k.a,{className:a.link,component:N.b,to:"/update-product",children:"Update"}),Object(p.jsx)(k.a,{className:a.link,component:N.b,to:"/index-products",children:"Index"})]})}),s=Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(k.a,{className:a.link,component:N.b,to:"/change-password",color:"inherit",children:"Change Password"}),Object(p.jsx)(k.a,{className:a.link,component:N.b,to:"/sign-out",color:"inherit",children:"Sign Out"})]}),i=Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(k.a,{className:a.link,component:N.b,to:"/sign-up",color:"inherit",children:"Sign Up"}),Object(p.jsx)(k.a,{className:a.link,component:N.b,to:"/sign-in",color:"inherit",children:"Sign In"})]});return Object(p.jsx)(w.a,{position:"static",className:a.navBar,children:Object(p.jsxs)(C.a,{style:{justifyContent:"flex-end"},children:[t?s:i,r?c:""]})})},A=r(15),P=r.n(A),q=r(21),D="http://localhost:8080",I=r(31),T=r.n(I),B=function(e,t,r){return T()({method:"POST",url:D+"/sign-up",data:{credentials:{email:e,password:t,password_confirmation:r}}})},E=function(e,t){return T()({method:"POST",url:D+"/sign-in",data:{credentials:{email:e,password:t}}})},F=function(e,t,r){return console.log(e),T()({method:"PATCH",url:D+"/change-password",headers:{Authorization:"Bearer ".concat(e.token)},data:{passwords:{old:t,new:r}}})},G=function(e){return T()({method:"DELETE",url:D+"/sign-out",headers:{Authorization:"Bearer ".concat(e.token)}})},z=r(80),H=r(166),Q=r(117),R=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),J=Object(l.f)((function(e){var t=e.setUser,r=e.history,a=Object(n.useState)(""),c=Object(h.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)(""),u=Object(h.a)(o,2),l=u[0],j=u[1],d=Object(n.useState)(""),b=Object(h.a)(d,2),m=b[0],f=b[1],g=R();return Object(p.jsxs)(z.a,{className:g.paper,children:[Object(p.jsx)(Q.a,{variant:"h4",align:"center",children:"Sign Up"}),Object(p.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),function(){var e=Object(q.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(s,l,m);case 3:n=e.sent,t(n.data.user),r.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error message: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)(H.a,{className:g.input,value:s,onChange:function(e){return i(e.target.value)},label:"Email",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:g.input,value:l,onChange:function(e){return j(e.target.value)},label:"Password",type:"password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:g.input,value:m,onChange:function(e){return f(e.target.value)},label:"Password Confirm",type:"password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})})),_=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),L=Object(l.f)((function(e){e.user;var t=e.setUser,r=e.setIsAdmin,a=e.history,c=Object(n.useState)(""),s=Object(h.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)(""),l=Object(h.a)(u,2),j=l[0],d=l[1],b=_();return Object(p.jsxs)(z.a,{className:b.paper,children:[Object(p.jsx)(Q.a,{variant:"h4",align:"center",children:"Sign In"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e=Object(q.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(i,j);case 3:n=e.sent,t(n.data.user),"admin"===n.data.user.role&&r(!0),a.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)(H.a,{className:b.input,value:i,onChange:function(e){return o(e.target.value)},label:"Email",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:b.input,value:j,onChange:function(e){return d(e.target.value)},label:"Password",type:"password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})})),M=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),V=Object(l.f)((function(e){var t=e.user,r=e.history,a=Object(n.useState)(""),c=Object(h.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)(""),u=Object(h.a)(o,2),l=u[0],j=u[1],d=M();return Object(p.jsxs)(z.a,{className:d.paper,children:[Object(p.jsx)(Q.a,{variant:"h4",align:"center",children:"Change Password"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e=Object(q.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t,s,l);case 3:n=e.sent,console.log("changepassword response:",n),r.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)(H.a,{className:d.input,value:s,onChange:function(e){return i(e.target.value)},label:"old password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:d.input,value:l,onChange:function(e){return j(e.target.value)},label:"new password",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})})),K=Object(l.f)((function(e){var t=e.user,r=e.setIsAdmin,a=e.clearUser,c=e.history;return Object(n.useEffect)((function(){!function(){var e=Object(q.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{G(t),a(),r(!1),c.push("/")}catch(n){console.log("error")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()})),null})),X=function(e,t,r,n,a,c,s,i,o,u){return T()({method:"POST",url:D+"/products",headers:{Authorization:"Bearer ".concat(e.token)},data:{product:{productDetails:{title:t,description:r,imageUrl:n,creator:a,genre:c,platform:s,rating:i},purchaseDetails:{quantity:o,price:u}}}})},Y=Object(v.a)({input:{marginBottom:"2rem"},paper:{padding:"2rem"}}),Z=function(e){var t=e.onCreateProduct,r=e.title,n=e.setTitle,a=e.description,c=e.setDescription,s=e.imageUrl,i=e.setImageUrl,o=e.creator,u=e.setCreator,l=e.genre,j=e.setGenre,d=e.platform,b=e.setPlatform,m=e.rating,h=e.setRating,f=e.quantity,g=e.setQuantity,x=e.price,v=e.setPrice,y=Y();return Object(p.jsxs)(z.a,{className:y.paper,children:[Object(p.jsx)(Q.a,{variant:"h4",align:"center",children:"Add a product"}),Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsx)(H.a,{className:y.input,value:r,onChange:function(e){return n(e.target.value)},label:"Title",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:y.input,value:a,onChange:function(e){return c(e.target.value)},label:"Description",color:"primary",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,required:!0}),Object(p.jsx)(H.a,{className:y.input,value:s,onChange:function(e){return i(e.target.value)},label:"Image",color:"primary",fullWidth:!0,required:!0}),Object(p.jsx)(H.a,{className:y.input,value:o,onChange:function(e){return u(e.target.value)},label:"Creator",color:"primary",fullWidth:!0}),Object(p.jsx)(H.a,{className:y.input,value:l,onChange:function(e){return j(e.target.value)},label:"Genre",color:"primary",fullWidth:!0}),Object(p.jsx)(H.a,{className:y.input,value:d,onChange:function(e){return b(e.target.value)},label:"Platform",color:"primary",fullWidth:!0}),Object(p.jsx)(H.a,{className:y.input,value:m,onChange:function(e){return h(e.target.value)},label:"Rating",color:"primary",fullWidth:!0}),Object(p.jsx)(H.a,{className:y.input,value:f,onChange:function(e){return g(e.target.value)},label:"Quantity",color:"primary",fullWidth:!0}),Object(p.jsx)(H.a,{className:y.input,value:x,onChange:function(e){return v(e.target.value)},label:"Price",color:"primary",fullWidth:!0}),Object(p.jsx)(O.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Submit"})]})]})},$=function(e){var t=e.user,r=Object(n.useState)(""),a=Object(h.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(""),o=Object(h.a)(i,2),u=o[0],l=o[1],j=Object(n.useState)(""),d=Object(h.a)(j,2),b=d[0],m=d[1],O=Object(n.useState)(""),f=Object(h.a)(O,2),g=f[0],x=f[1],v=Object(n.useState)(""),y=Object(h.a)(v,2),S=y[0],w=y[1],C=Object(n.useState)(""),N=Object(h.a)(C,2),k=N[0],W=N[1],U=Object(n.useState)(0),A=Object(h.a)(U,2),D=A[0],I=A[1],T=Object(n.useState)(0),B=Object(h.a)(T,2),E=B[0],F=B[1],G=Object(n.useState)(0),z=Object(h.a)(G,2),H=z[0],Q=z[1];return Object(p.jsx)(Z,{onCreateProduct:function(e){e.preventDefault(),function(){var e=Object(q.a)(P.a.mark((function e(){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(t,c,u,b,g,S,k,D,E,H);case 3:r=e.sent,console.log("successfully created",r.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()},title:c,setTitle:s,description:u,setDescription:l,imageUrl:b,setImageUrl:m,creator:g,setCreator:x,genre:S,setGenre:w,platform:k,setPlatform:W,rating:D,setRating:I,quantity:E,setQuantity:F,price:H,setPrice:Q})},ee=r(163),te=r(164),re=Object(v.a)({root:{maxWidth:"20rem",maxHeight:"30rem",margin:"2rem auto"},mediaContainer:{maxWidth:"7rem",margin:"1rem auto"},media:{display:"block",maxHeight:"100%",maxWidth:"100%"}}),ne=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),r=t[0],a=t[1],c=re();return Object(n.useEffect)((function(){(function(){var e=Object(q.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T()({method:"GET",url:D+"/products"});case 3:t=e.sent,a(t.data.product),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(r),Object(p.jsx)(n.Fragment,{children:r.map((function(e){return Object(p.jsxs)(ee.a,{className:c.root,children:[Object(p.jsx)("div",{className:c.mediaContainer,children:Object(p.jsx)("img",{className:c.media,src:"".concat("/client-g-tech","/assets/images/").concat(e.productDetails.imageUrl,".jpg"),alt:e.title})}),Object(p.jsxs)(te.a,{children:[Object(p.jsx)(Q.a,{variant:"h4",align:"center",children:e.productDetails.title}),Object(p.jsx)(Q.a,{variant:"body1",align:"center",children:e.productDetails.description})]})]},e._id)}))})},ae=r(165),ce=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).setUser=function(e){return n.setState({user:e})},n.setIsAdmin=function(e){n.setState({isAdmin:e}),console.log("is admin set to: ",n.state.isAdmin)},n.clearUser=function(){return n.setState({user:null})},n.state={user:null,isAdmin:!1},n}return Object(i.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.user,a=t.isAdmin;return Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(U,{user:r,isAdmin:a}),Object(p.jsxs)(ae.a,{maxWidth:"sm",children:[Object(p.jsx)(l.b,{path:"/sign-up",render:function(){return Object(p.jsx)(J,{user:r,setUser:e.setUser})}}),Object(p.jsx)(l.b,{path:"/sign-in",render:function(){return Object(p.jsx)(L,{user:r,setUser:e.setUser,setIsAdmin:e.setIsAdmin})}}),Object(p.jsx)(m,{user:r,path:"/change-password",render:function(){return Object(p.jsx)(V,{user:r})}}),Object(p.jsx)(m,{user:r,path:"/sign-out",render:function(){return Object(p.jsx)(K,{user:r,setIsAdmin:e.setIsAdmin,clearUser:e.clearUser})}}),Object(p.jsx)(m,{user:r,path:"/create-product",render:function(){return Object(p.jsx)($,{user:r})}}),Object(p.jsx)(l.b,{path:"/index-products",render:function(){return Object(p.jsx)(ne,{})}})]})]})}}]),r}(n.Component),se=Object(p.jsx)(N.a,{children:Object(p.jsx)(ce,{})});c.a.render(se,document.querySelector("#root"))},85:function(e,t,r){},90:function(e,t,r){}},[[116,1,2]]]);
//# sourceMappingURL=main.fd48c847.chunk.js.map